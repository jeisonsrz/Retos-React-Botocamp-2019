<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">


                
</head>
<body>
       <hi>Callbacks</hi>

    <script>
        
    function getP(url){
        return new Promise(function(resolve,reject){
            var xhttp= new XMLHttpRequest();
        xhttp.onreadystatechange = function(){
            if(this.readyState==4){
                if(this.status==200){
                    resolve(JSON.parse(this.responseText))
                }else{
                    reject("Error: :p"+this.status);
                }
                 
            }

        };
        xhttp.open('GET',url);
        xhttp.send();

        });
    }
  /*  getP("https://swapi.co/api/people/1")
    .then(function(data){
    console.log(data);
    return getP("https://swapi.co/api/people/2");
    })
    .then(function(data2){
        console.log(data2);
    })
    .catch(function(){
    console.error(error);
    }); */

   async function getAllDatos(){
        var arrUrl=["https://swapi.co/api/people/1","https://swapi.co/api/people/2","https://swapi.co/api/people/3","https://swapi.co/api/people/4","https://swapi.co/api/people/5"]
        var promesas= arrUrl.map(function(url){
            return getP(url);
        });
        try{
            var personajes = await Promise.all(promesas);
            console.log(personajes);
        }catch (error){

        }
    }
    </script>
        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</body>
</html>